<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AI Resume Builder</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <style>
      .container {
        max-width: 700px;
        margin-top: 30px;
      }

      .loader {
        display: none;
        border: 16px solid #f3f3f3;
        border-top: 16px solid #3498db;
        border-radius: 50%;
        width: 120px;
        height: 120px;
        animation: spin 2s linear infinite;
        margin: 0 auto;
        margin-top: 20px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .resume-box {
        border: 1px solid #dee2e6;
        border-radius: 0.25rem;
        padding: 20px;
        background-color: #ffffff;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      .resume-box h3,
      .resume-box h4 {
        margin-top: 0;
        font-size: 24px;
      }
      .resume-box h4 {
        margin-top: 20px;
        border-bottom: 1px solid #dee2e6;
        padding-bottom: 5px;
      }
      .resume-box p {
        margin: 10px 0;
      }
      .error {
        color: #dc3545;
      }
    </style>
  </head>

  <body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="/">AI Resume Builder</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
      </div>
    </nav>

    <div class="container">
      <h3 class="text-center mb-4 text-success">A.I Resume Builder</h3>

      <form action="" id="resume-form">
        <div class="form-group">
          <label for="name">Full Name</label>
          <input
            type="text"
            class="form-control"
            id="name"
            placeholder="Enter Your Full Name"
            required
          />
        </div>
        <div class="form-group">
          <label for="email">Email</label>
          <input
            type="email"
            class="form-control"
            id="email"
            placeholder="Enter Your Email"
            required
          />
        </div>
        <div class="form-group">
          <label for="phone">Phone</label>
          <input
            type="text"
            class="form-control"
            id="phone"
            placeholder="Enter Your Phone Number"
            required
          />
        </div>
        <div class="form-group">
          <label for="address">Address</label>
          <input
            type="text"
            class="form-control"
            id="address"
            placeholder="Enter Your addressr"
            required
          />
        </div>
        <div class="form-group">
          <label for="profile">Profile Description</label>
          <textarea
            type="text"
            rows="4"
            class="form-control"
            id="profile"
            placeholder="Tell about yourself"
            required
          ></textarea>
        </div>

        <div class="form-group">
          <label for="role">Role</label>
          <input
            type="text"
            class="form-control"
            id="role"
            placeholder="Enter your role"
            required
          />
        </div>

        <div class="form-group">
          <label for="skills">Skills</label>
          <textarea
            class="form-control"
            id="skills"
            rows="4"
            placeholder="List your skills..."
            required
          ></textarea>
        </div>
        <div class="form-group">
          <label for="work-experience-1">Work Experience 1</label>
          <textarea
            class="form-control"
            id="work-experience-1"
            rows="4"
            placeholder="Describe your first work experience..."
            required
          ></textarea>
        </div>
        <div class="form-group">
          <label for="work-experience-2">Work Experience 2</label>
          <textarea
            class="form-control"
            id="work-experience-2"
            rows="4"
            placeholder="Describe your second work experience..."
            required
          ></textarea>
        </div>

        <div class="form-group">
          <label for="education">Education</label>
          <textarea
            class="form-control"
            id="education"
            rows="4"
            placeholder="List your education details (college name, percentage, branch)..."
            required
          ></textarea>
        </div>

        <div class="form-group">
          <label for="internship">Internship</label>
          <textarea
            class="form-control"
            id="internship"
            rows="4"
            placeholder="Describe your internship experience..."
            required
          ></textarea>
        </div>
        <div class="form-group">
          <label for="hobbies">Hobbies</label>
          <textarea
            class="form-control"
            id="hobbies"
            rows="4"
            placeholder="List your hobbies..."
            required
          ></textarea>
        </div>

        <div class="form-group">
          <label for="certifications">Certifications</label>
          <textarea
            class="form-control"
            id="certifications"
            rows="4"
            placeholder="List your certifications..."
            required
          ></textarea>
        </div>

        <div class="form-group">
          <label for="top-projects">Top Projects</label>
          <textarea
            class="form-control"
            id="top-projects"
            rows="4"
            placeholder="Describe your top projects (title, description)..."
            required
          ></textarea>
        </div>

        <button
          type="button"
          class="btn btn-primary btn-block mt-3"
          onclick="submitResume()"
        >
          Generate AI resume
        </button>
      </form>

      <div class="loader" id="loader"></div>

      <div id="resume-result" class="mt-4"></div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <script>
      async function submitResume() {
        const loader = document.getElementById("loader");
        const resultDiv = document.getElementById("resume-result");

        //show loader
        loader.style.display = "block";

        const name = document.getElementById("name").value;
        const email = document.getElementById("email").value;
        const phone = document.getElementById("phone").value;
        const address = document.getElementById("address").value;
        const profile = document.getElementById("profile").value;
        const role = document.getElementById("role").value;
        const skills = document.getElementById("skills").value;
        const workExperience1 =
          document.getElementById("work-experience-1").value;
        const workExperience2 =
          document.getElementById("work-experience-2").value;
        const education = document.getElementById("education").value;
        const internship = document.getElementById("internship").value;
        const hobbies = document.getElementById("hobbies").value;
        const certifications = document.getElementById("certifications").value;
        const topProjects = document.getElementById("top-projects").value;

        const response = await fetch("/generate-resume", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            name,
            email,
            phone,
            address,
            profile,
            role,
            skills,
            workExperience1,
            workExperience2,
            education,
            internship,
            hobbies,
            certifications,
            topProjects,
          }),
        });

        const data = await response.json();

        //hide the loader
        loader.style.display = "none";

        if (data.resume) {
          resultDiv.innerHTML = `
            <div class="resume-box">

                <h3>${data.resume.name}</h3>
                <p><strong>Email:</strong> ${data.resume.email}</p>
                  <p><strong>Phone:</strong> ${data.resume.phone}</p>
                     <p><strong>Address:</strong> ${data.resume.address}</p>
                      <h4 class="text-secondary">Profile Description</h4>
                         <p>${data.resume.profile}</p>
                        <h4>Role</h4>
                        <p>${data.resume.role}</p>
                        <h4>Skills</h4>
                        <p>${data.resume.skills}</p>
                        <hr/>
                        <h4 class="text-secondary">Work Experience</h4>
                          <p>${data.resume.workExperience1}</p>
                        <p>${data.resume.workExperience2}</p>
                            <h4 class="text-secondary">Education</h4>
                            <p>${data.resume.education}</p>
                        <h4 class="text-secondary">Internship</h4>
                        <p>${data.resume.internship}</p>
                        <h4 class="text-secondary">Hobbies</h4>
                        <p>${data.resume.hobbies}</p>
                        <h4 class="text-secondary">Certifications</h4>
                        <p>${data.resume.certifications}</p>
                        <h4 class="text-secondary">Top Projects</h4>
                        <p>${data.resume.topProjects}</p>
                        <a href="/download-pdf" class="btn btn-success btn-block mt-4">Export to PDF</a>
                    
            </div>
            
            `;
        }

        else{
            resultDiv.innerHTML=` <div class="resume-box">
                        <h3 class="error">Error:</h3>
                        <p>${data.error}</p>
                    </div>`
        }
      }
    </script>
  </body>
</html>
